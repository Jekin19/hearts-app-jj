{"version":3,"sources":["redux/actions/round.ts","common/heartRules.ts","redux/actions/players.ts","redux/actions/tricks.ts","redux/reducers/heartsTricks.ts","redux/reducers/heartsRounds.ts","redux/reducers/heartsPlayers.ts","redux/actions/ui.ts","redux/reducers/heartsUI.ts","redux/reducers/heartPhases.ts","redux/reducers/index.ts","common/mobileRules.ts","components/Card.tsx","ai/random.ts","redux/actions/deal.ts","redux/actions/phases.ts","redux/actions/index.ts","components/PlayerHand.tsx","components/RenderIf.tsx","components/Toast.tsx","components/Player.tsx","components/Slide.tsx","components/Trick.tsx","components/HeartsGames.tsx","components/Rules.tsx","components/ScoresTable.tsx","components/Scores.tsx","components/NavBar.tsx","components/GameOver.tsx","App.tsx","reportWebVitals.ts","index.tsx","redux/store.ts"],"names":["NEW_ROUND","NEW_GAME","constants","name","numDecks","handSize","cardSuits","S","symbol","colour","rank","H","C","D","cardValues","J","Q","K","A","pointValue","card","suit","value","cardRank","undefined","PLAY_CARD","ADD_PLAYER","DEAL_CARD","TOGGLE_CARD","PASS_CARDS","addPlayer","playerType","type","id","uuidV4","toggleCard","playerID","playCard","NEW_TRICK","getCurrentTrick","tricks","getCardSuit","getTrickSuit","trick","length","getTrickWinnerID","winningPlayerID","winningCard","c","getTrickPointValue","reduce","acc","move","heartsTricks","state","action","currentTrick","newTrick","nextState","slice","rounds","fromHeartsTricks","getCurrentWinnerID","heartsRound","heartsRounds","HEART_PLAYER_NAMES","PLAYER_TYPE","getPlayerByID","players","find","player","getPlayerHand","playerHand","heartsPlayer","currAction","selectedCards","addCard","cards","sortIndex","newCardRank","removeCard","idx","findIndex","concat","getPlayerStateOnDeal","Object","assign","getPlayerStateOnToggle","playerHandOnPass","containsAllCards","containsNoCards","getPlayerStateOnPassCards","fromPlayerID","toPlayerID","getPlayerStateOnNewGame","getPlayerStateOnPlayCard","heartsPlayers","map","SET_PLAYER_POV","setPOV","heartsUI","POV","SET_PHASE","GAME_PHASES","GAME_START","GAME_END","ROUND_NEW","ROUND_START","ROUND_END","TRICK_START","TRICK_END","PASSING","PLAYING","heartsPhase","phase","getPassDirection","passDirections","getRoundNumber","getToast","getCurrentPhase","getPlayers","passDirection","getPOVPlayerIndex","currentPlayer","getCurrentPlayer","getPlayerByName","playerName","fromHeartsPlayers","getSelectedCards","getPlayerIDs","previousTrick","getPreviousTrick","previousWinnerID","lastMove","p","isTrickComplete","playerIDs","POVPlayerID","getCurrentPOV","indexOf","isRoundComplete","isGameComplete","scoreTotals","currentScores","getScores","sum","fill","roundScore","s","getScoreTotals","isCurrentPhase","playerHandContainsCard","isPlayerHandOnlyHearts","playerHandContainsSuit","fromHeartsRounds","getCurrentTrickSuit","isHeartsBroken","getRoundTrickHistory","scores","trickPoints","trickWinner","r","round","roundScores","i","push","fromHeartsUI","ui","getWinnerID","showPlayerHand","playerDirection","isMobile","defaultNavBarHeight","height","CardValue","className","CardSymbol","Card","onClickHandler","direction","overturned","toggled","contents","heartsConstants","onClick","style","color","getRandomElement","array","max","Math","floor","random","randomPop","index","splice","deal","dispatch","getState","suits","values","deck","v","cardInfo","deckSize","d","computerSelectPassCard","hand","cardPool","filter","sc","aiPassChoice","startPlaying","startRound","addPlayerToState","computerMove","nextCard","hasLead","followSuit","brokenHearts","aiPlayChoice","gameTick","delayedPromise","delay","setTimeout","aiPlayers","isReadyToPass","pass","onNewGame","playCardAction","getCurrentPlayerID","isValidMove","isToggled","PlayerHand","playerInfo","cardsHidden","useSelector","useDispatch","currentPhase","onCardClick","useCallback","playOrToggleCard","cardElements","RenderIf","validate","children","Toast","message","Player","useState","playerScore","setPlayerScore","useEffect","currentScore","playerIndex","Badge","variant","pill","Slide","cardinal","cName","Trick","winnerID","POVIndex","directions","pnum","directionMap","animationDirection","HeartsGame","navBarHeight","getHeight","minHeight","Rules","show","setShow","href","Modal","onHide","backdrop","keyboard","Header","closeButton","Title","Body","Footer","ScoresTable","rowData","setRowData","runningScore","player1","player2","player3","you","width","columnDefs","field","onGridReady","event","api","sizeColumnsToFit","rowClassRules","params","data","Scores","NavBar","Navbar","bg","Brand","src","alt","Form","inline","GameOver","App","navBarRef","useRef","setNavBarHeight","isGameOver","current","clientHeight","ref","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","element","document","getElementById","setClassName","store","middleWares","logger","thunkMiddleware","middlewareEnhancer","applyMiddleware","enhancers","composedEnhancers","composeWithDevTools","rootReducer","combineReducers","createStore","configureStore","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.db918db4.chunk.js","sourcesContent":["export const NEW_ROUND = 'NEW_ROUND';\nexport const NEW_GAME = 'NEW_GAME';\n\nexport const newRound = () => ({ type: NEW_ROUND });\nexport const newGame = () => ({ type: NEW_GAME });\n\nexport type RoundActions = ReturnType<typeof newRound> | ReturnType<typeof newGame>;\n","interface IHeartsRulesProps {\n  name: string;\n  numDecks: number;\n  handSize: number;\n  cardSuits: ICardSuit;\n  cardValues: any;\n  pointValue: any;\n  cardRank: any;\n}\n\nexport type Suits = 'S' | 'H' | 'C' | 'D';\n\nexport const constants: IHeartsRulesProps = {\n  name: 'Hearts',\n  numDecks: 1,\n  handSize: 13,\n  cardSuits: {\n    S: {\n      name: 'Spades',\n      symbol: '\\u2660',\n      colour: 'black',\n      rank: 26\n    },\n    H: {\n      name: 'Hearts',\n      symbol: '\\u2665',\n      colour: 'red',\n      rank: 39\n    },\n    C: {\n      name: 'Clubs',\n      symbol: '\\u2663',\n      colour: 'black',\n      rank: 0\n    },\n    D: {\n      name: 'Diamonds',\n      symbol: '\\u2666',\n      colour: 'red',\n      rank: 13\n    }\n  },\n\n  cardValues: {\n    '2': { name: 'Two', symbol: '2', rank: 1 },\n    '3': { name: 'Three', symbol: '3', rank: 2 },\n    '4': { name: 'Four', symbol: '4', rank: 3 },\n    '5': { name: 'Five', symbol: '5', rank: 4 },\n    '6': { name: 'Six', symbol: '6', rank: 5 },\n    '7': { name: 'Seven', symbol: '7', rank: 6 },\n    '8': { name: 'Eight', symbol: '8', rank: 7 },\n    '9': { name: 'Nine', symbol: '9', rank: 8 },\n    '10': { name: 'Ten', symbol: '10', rank: 9 },\n    J: { name: 'Jack', symbol: 'J', rank: 10 },\n    Q: { name: 'Queen', symbol: 'Q', rank: 11 },\n    K: { name: 'King', symbol: 'K', rank: 12 },\n    A: { name: 'Ace', symbol: 'A', rank: 13 }\n  },\n\n  pointValue: (card: ICardInfo) => {\n    if (card.suit === 'H') {\n      return 1;\n    } else if (card.suit === 'S' && card.value === 'Q') {\n      return 13;\n    } else {\n      return 0;\n    }\n  },\n\n  cardRank: (card: ICardInfo) => {\n    if (card === undefined || card.suit === undefined || card.value === undefined) {\n      return 0;\n    }\n    return constants.cardSuits[card.suit].rank + constants.cardValues[card.value].rank;\n  }\n};\n\nexport interface ICardValueProps {\n  value: string;\n}\n\nexport interface ICardSymbolProps {\n  symbol: string;\n}\n\nexport interface ICardInfo extends ICardValueProps {\n  suit: Suits;\n}\n\ninterface ISuitProps {\n  name: string;\n  symbol: string;\n  colour: string;\n  rank: number;\n}\ninterface ICardSuit {\n  [key: string]: ISuitProps;\n}\n","import { v4 as uuidV4 } from 'uuid';\nimport { ICardInfo } from '../../common/heartRules';\n\nexport const PLAY_CARD = 'PLAY_CARD';\nexport const ADD_PLAYER = 'ADD_PLAYER';\nexport const DEAL_CARD = 'DEAL_CARD';\nexport const TOGGLE_CARD = 'TOGGLE_CARD';\nexport const PASS_CARDS = 'PASS_CARDS';\n\nexport const addPlayer = (name: string, playerType = 'Human') => ({\n  type: ADD_PLAYER,\n  id: uuidV4(),\n  name,\n  playerType\n});\n\nexport const dealCard = (playerID: string, card: ICardInfo) => ({\n  type: DEAL_CARD,\n  playerID,\n  card\n});\n\nexport const toggleCard = (playerID: string, card: ICardInfo) => ({\n  type: TOGGLE_CARD,\n  playerID,\n  card\n});\n\nexport const playCard = (playerID: string, card: ICardInfo) => ({\n  type: PLAY_CARD,\n  playerID,\n  card\n});\n\nexport const passCards = (fromPlayerID: string, toPlayerID: string, cards: Array<ICardInfo>) => ({\n  type: PASS_CARDS,\n  fromPlayerID,\n  toPlayerID,\n  cards\n});\n\nexport type PlayerActions =\n  | ReturnType<typeof addPlayer>\n  | ReturnType<typeof dealCard>\n  | ReturnType<typeof playCard>\n  | ReturnType<typeof passCards>;\n","export const NEW_TRICK = 'NEW_TRICK';\n\nexport const newTrick = () => ({\n  type: NEW_TRICK\n});\n\nexport type TrickActionTypes = ReturnType<typeof newTrick>;\n","import { constants, ICardInfo } from '../../common/heartRules';\nimport { Tricks } from '../../common/types/tricks';\nimport { PhasesActionTypes } from '../actions/phases';\nimport { playCard, PLAY_CARD } from '../actions/players';\nimport { RoundActions } from '../actions/round';\nimport { NEW_TRICK } from '../actions/tricks';\n\nexport const getCurrentTrick = (tricks: Array<Array<Tricks.State>>) => tricks[0];\nexport const getPreviousTrick = (tricks: Array<Array<Tricks.State>>) => {\n  if (tricks.length > 1) {\n    return tricks[1];\n  } else {\n    return [];\n  }\n};\n\nconst getCardSuit = (card: ICardInfo) => {\n  return card.suit;\n};\n\nexport const getTrickSuit = (trick: Array<Tricks.State>) => {\n  if (!trick.length) {\n    return null;\n  }\n  return getCardSuit(trick[0].card);\n};\n\nexport const getTrickWinnerID = (trick: Array<Tricks.State>) => {\n  let winningPlayerID = null,\n    winningCard = null;\n  winningCard = trick[0].card;\n  winningPlayerID = trick[0].playerID;\n  const suit = getTrickSuit(trick);\n  for (let c = 0; c < trick.length; c++) {\n    let { card, playerID } = trick[c];\n    if (\n      suit === getCardSuit(card) &&\n      constants.cardValues[card.value].rank > constants.cardValues[winningCard.value].rank\n    ) {\n      winningCard = card;\n      winningPlayerID = playerID;\n    }\n  }\n  return winningPlayerID;\n};\n\nexport const getCurrentWinnerID = (state: Array<Array<Tricks.State>>) => {\n  const currentTrick = getCurrentTrick(state);\n  if (!currentTrick.length) {\n    return null;\n  }\n  return getTrickWinnerID(currentTrick);\n};\n\nexport const getLastMove = (tricks: Array<Tricks.State>) => tricks[tricks.length - 1];\n\nexport const getCompletedTricks = (tricks: Array<Array<Tricks.State>>) => tricks.slice(1);\n\nexport const getTrickPointValue = (trick: Array<Tricks.State>) =>\n  trick.reduce((acc, move) => acc + constants.pointValue(move.card), 0);\n\nexport const heartsTricks = (state: Array<Array<Tricks.State>> = [[]], action: RoundActions | PhasesActionTypes) => {\n  switch (action.type) {\n    case PLAY_CARD:\n      const currentTrick = getCurrentTrick(state);\n      const newTrick = [\n        ...currentTrick,\n        {\n          card: (action as ReturnType<typeof playCard>).card,\n          playerID: (action as ReturnType<typeof playCard>).playerID\n        }\n      ];\n      const nextState = [newTrick, ...state.slice(1)];\n      return nextState;\n    case NEW_TRICK:\n      return [[], ...state];\n    default:\n      return state;\n  }\n};\n","import { Round } from '../../common/types/round';\nimport { Tricks } from '../../common/types/tricks';\nimport { PhasesActionTypes } from '../actions/phases';\nimport { NEW_GAME, NEW_ROUND, RoundActions } from '../actions/round';\nimport * as fromHeartsTricks from './heartsTricks';\n\nexport const getRoundNumber = (rounds: Array<Round.State>) => rounds.length;\nexport const getCurrentTrick = (rounds: Array<Round.State>) => fromHeartsTricks.getCurrentTrick(rounds[0].tricks);\nexport const getPreviousTrick = (rounds: Array<Round.State>) => fromHeartsTricks.getPreviousTrick(rounds[0].tricks);\nexport const getCurrentTrickSuit = (rounds: Array<Round.State>) =>\n  fromHeartsTricks.getTrickSuit(getCurrentTrick(rounds));\nexport const getRoundTrickHistory = (rounds: Array<Round.State>) =>\n  fromHeartsTricks.getCompletedTricks(rounds[0].tricks as Array<Array<Tricks.State>>);\nexport const getCurrentWinnerID = (rounds: Array<Round.State>) => fromHeartsTricks.getCurrentWinnerID(rounds[0].tricks);\n\nexport const isHeartsBroken = (rounds: Array<Round.State>) => {\n  for (let trick of getRoundTrickHistory(rounds)) {\n    for (let move of trick) {\n      if (move.card.suit === 'H') {\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\nexport const getScores = (state: Array<Round.State>, playerIDs: Array<string>) => {\n  const scores = [];\n  let trickPoints = 0;\n  let trickWinner = null;\n  for (let r = state.length - 1; r >= 0; r--) {\n    let round = state[r];\n    const roundScores = [0, 0, 0, 0].fill(0, 0, playerIDs.length);\n    for (let trick of round.tricks) {\n      trickPoints = fromHeartsTricks.getTrickPointValue(trick);\n      if (trickPoints > 0) {\n        trickWinner = fromHeartsTricks.getTrickWinnerID(trick);\n        roundScores[playerIDs.indexOf(trickWinner)] += trickPoints;\n      }\n    }\n    // Check if someone shot the moon.\n    for (let i = 0; i < roundScores.length; i++) {\n      if (roundScores[i] === 26) {\n        roundScores[i] -= 52; // Erase current score, and go negative.\n      }\n    }\n    scores.push(roundScores);\n  }\n  return scores;\n};\n\nconst heartsRound = (state: Round.State = { tricks: [[]] }, action: RoundActions | PhasesActionTypes) => {\n  return {\n    tricks: fromHeartsTricks.heartsTricks(state.tricks, action)\n  };\n};\n\nexport const heartsRounds = (\n  state: Array<Round.State> = [{ tricks: [[]] }],\n  action: RoundActions | PhasesActionTypes\n) => {\n  switch (action.type) {\n    case NEW_ROUND:\n      return [heartsRound(undefined, action), ...state];\n    case NEW_GAME:\n      return [heartsRound(undefined, action)];\n    default:\n      return [heartsRound(state[0], action), ...state.slice(1)];\n  }\n};\n","import { constants, ICardInfo, Suits } from '../../common/heartRules';\nimport {\n  addPlayer,\n  ADD_PLAYER,\n  dealCard,\n  DEAL_CARD,\n  passCards,\n  PASS_CARDS,\n  playCard,\n  PlayerActions,\n  PLAY_CARD,\n  toggleCard,\n  TOGGLE_CARD\n} from '../actions/players';\nimport { NEW_GAME } from '../actions/round';\nimport { IPlayerInfo } from './IPlayerInfo';\n\nexport const HEART_PLAYER_NAMES = {\n  Player1: 'Alice',\n  Player2: 'Bob',\n  Player3: 'Carol',\n  Player4: 'You'\n} as const;\n\nexport const PLAYER_TYPE = {\n  AI: 'AI',\n  Human: 'Human'\n};\nexport const getPlayerIDs = (players: Array<IPlayerInfo>) => players.map((player) => player.id);\n\nexport const getPlayerByID = (players: Array<IPlayerInfo>, playerID: string) => {\n  return players?.find((player) => player.id === playerID);\n};\n\nexport const getPlayerHand = (players: Array<IPlayerInfo>, playerID: string) => {\n  const player = getPlayerByID(players, playerID);\n  return player?.playerHand;\n};\n\nexport const getSelectedCards = (players: Array<IPlayerInfo>, playerID: string) => {\n  const player = getPlayerByID(players, playerID);\n  return player?.selectedCards;\n};\n\nconst heartsPlayer = (state = {}, action: PlayerActions) => {\n  let nextState = null;\n  switch (action.type) {\n    case ADD_PLAYER:\n      const currAction = action as ReturnType<typeof addPlayer>;\n      nextState = {\n        id: currAction.id,\n        name: currAction.name,\n        playerType: currAction.playerType,\n        playerHand: [],\n        selectedCards: []\n      };\n      return nextState;\n    default:\n      return state;\n  }\n};\n\nexport const playerHandContainsCard = (state: Array<IPlayerInfo>, playerID: string, card: ICardInfo) => {\n  const playerHand = getPlayerHand(state, playerID);\n  for (let c of playerHand as ICardInfo[]) {\n    if (c.suit === card.suit && c.value === card.value) {\n      return true;\n    }\n  }\n  return false;\n};\n\nexport const isPlayerHandOnlyHearts = (state: Array<IPlayerInfo>, playerID: string) => {\n  const playerHand = getPlayerHand(state, playerID);\n  for (let card of playerHand as Array<ICardInfo>) {\n    if (card.suit !== 'H') {\n      return false;\n    }\n  }\n  return true;\n};\n\nexport const playerHandContainsSuit = (state: Array<IPlayerInfo>, playerID: string, suit: Suits) => {\n  const playerHand = getPlayerHand(state, playerID);\n  for (let card of playerHand as Array<ICardInfo>) {\n    if (card.suit === suit) {\n      return true;\n    }\n  }\n  return false;\n};\n\nconst addCard = (cards: Array<ICardInfo>, c: ICardInfo) => {\n  let sortIndex = 0;\n  const newCardRank = constants.cardRank(c);\n  for (sortIndex = 0; sortIndex < cards.length && newCardRank > constants.cardRank(cards[sortIndex]); sortIndex++) {}\n  return [...cards.slice(0, sortIndex), c, ...cards.slice(sortIndex)];\n};\n\nconst removeCard = (cards: Array<ICardInfo>, c: ICardInfo) => {\n  const idx = cards.findIndex((card) => card.value === c.value && card.suit === c.suit);\n  if (idx > -1) {\n    return cards.slice(0, idx).concat(cards.slice(idx + 1));\n  } else {\n    return cards;\n  }\n};\n\nconst getPlayerStateOnDeal = (state: IPlayerInfo, action: ReturnType<typeof dealCard>) => {\n  if (state.id !== action.playerID) {\n    return state;\n  }\n  const nextState = Object.assign({}, state, {\n    playerHand: addCard(state.playerHand, action.card)\n  });\n  return nextState;\n};\n\nconst selectedCards = (state: ICardInfo[], action: ReturnType<typeof toggleCard>) => {\n  const idx = state.findIndex((card) => card.value === action.card.value && card.suit === action.card.suit);\n  if (idx > -1) {\n    return state.slice(0, idx) ?? ([] as ICardInfo[]).concat(state.slice(idx + 1));\n  } else {\n    return [...state, action.card];\n  }\n};\n\nconst getPlayerStateOnToggle = (state: IPlayerInfo, action: ReturnType<typeof toggleCard>) => {\n  if (state.id !== action.playerID) {\n    return state;\n  }\n  const nextState = Object.assign({}, state, {\n    selectedCards: selectedCards(state.selectedCards, action)\n  });\n  return nextState;\n};\n\nconst playerHandOnPass = (state: Array<ICardInfo>, action: ReturnType<typeof passCards>) => {\n  let containsAllCards = true;\n  let containsNoCards = true;\n  let idx = null;\n  for (let card of action.cards) {\n    idx = state.findIndex((c) => card.value === c.value && card.suit === c.suit);\n    if (idx > -1) {\n      containsAllCards = true;\n      containsNoCards = false;\n    } else {\n      containsAllCards = false;\n      containsNoCards = true;\n    }\n  }\n  if (containsAllCards) {\n    return action.cards.reduce(removeCard, state);\n  } else if (containsNoCards) {\n    return action.cards.reduce(addCard, state);\n  }\n  return state;\n};\n\nconst getPlayerStateOnPassCards = (state: IPlayerInfo, action: ReturnType<typeof passCards>) => {\n  if (action.fromPlayerID === action.toPlayerID) {\n    return state;\n  }\n  let nextState = null;\n  if (action.fromPlayerID === state.id) {\n    nextState = Object.assign({}, state, {\n      selectedCards: [],\n      playerHand: playerHandOnPass(state.playerHand, action)\n    });\n    return nextState;\n  } else if (action.toPlayerID === state.id) {\n    nextState = Object.assign({}, state, {\n      playerHand: playerHandOnPass(state.playerHand, action)\n    });\n    return nextState;\n  }\n  return state;\n};\n\nconst getPlayerStateOnNewGame = (state: IPlayerInfo) => {\n  return Object.assign({}, state, {\n    playerHand: [],\n    selectedCards: []\n  });\n};\n\nconst getPlayerStateOnPlayCard = (state: IPlayerInfo, action: ReturnType<typeof playCard>) => {\n  if (state.id !== action.playerID) {\n    return state;\n  }\n  const nextState = Object.assign({}, state, {\n    playerHand: removeCard(state.playerHand, action.card)\n  });\n  return nextState;\n};\n\nconst heartsPlayers = (state = [], action: PlayerActions) => {\n  let nextState = null;\n  switch (action.type) {\n    case ADD_PLAYER:\n      nextState = [...state, heartsPlayer(state, action)];\n      return nextState;\n    case DEAL_CARD:\n      return state.map((player) => getPlayerStateOnDeal(player, action as ReturnType<typeof dealCard>));\n    case TOGGLE_CARD:\n      return state.map((player) => getPlayerStateOnToggle(player, action as ReturnType<typeof toggleCard>));\n    case PASS_CARDS:\n      return state.map((player) => getPlayerStateOnPassCards(player, action as ReturnType<typeof passCards>));\n    case PLAY_CARD:\n      return state.map((player) => getPlayerStateOnPlayCard(player, action as ReturnType<typeof playCard>));\n    case NEW_GAME:\n      return state.map((player) => getPlayerStateOnNewGame(player));\n    default:\n      return state;\n  }\n};\n\nexport default heartsPlayers;\n","export const SET_PLAYER_POV = 'UI:SET_PLAYER_POV';\n\nexport const setPOV = (playerID: string) => ({\n  type: SET_PLAYER_POV,\n  playerID\n});\n\nexport type UIActionTypes = ReturnType<typeof setPOV>;\n","import { SET_PLAYER_POV, UIActionTypes } from '../actions/ui';\n\nconst heartsUI = (state = { POV: null }, action: UIActionTypes) => {\n  switch (action.type) {\n    case SET_PLAYER_POV:\n      return { POV: action.playerID };\n    default:\n      return state;\n  }\n};\n\nexport const getCurrentPOV = (state: UI.State) => state.POV;\n\nexport default heartsUI;\n","import { PhasesActionTypes } from '../actions/phases';\nimport { PLAY_CARD } from '../actions/players';\nimport { NEW_GAME, NEW_ROUND } from '../actions/round';\nimport { NEW_TRICK } from '../actions/tricks';\n\nexport const SET_PHASE = 'SET_PHASE';\n\n// GAME_START:\n//  Add Players\n//  Fix Deck Size\n// ROUND_START:\n//  Deal\n// PASSING:\n//  Select Cards to pass\n//  Pass Cards\n// PLAYING:\n//  Play Card\n//  New Trick\n// ROUND_END:\n//  Display scores\n//  Round_START:\n// GAME_END:\n//  Display scores\n//  New Game\n//\nexport const GAME_PHASES = {\n  GAME_START: 'GAME_START',\n  GAME_END: 'GAME_END',\n  ROUND_NEW: 'ROUND_NEW',\n  ROUND_START: 'ROUND_START',\n  ROUND_END: 'ROUND_END',\n  TRICK_START: 'TRICK_START',\n  TRICK_END: 'TRICK_END',\n  PASSING: 'PASSING',\n  PLAYING: 'PLAYING'\n} as const;\n\nexport const heartsPhase = (state = GAME_PHASES.GAME_START, action: PhasesActionTypes) => {\n  switch (action.type) {\n    case SET_PHASE:\n      if (!(action.phase in GAME_PHASES)) {\n        return state;\n      }\n      return GAME_PHASES[action.phase];\n    case NEW_GAME:\n      return GAME_PHASES.GAME_START;\n    case NEW_ROUND:\n      return GAME_PHASES.ROUND_NEW;\n    case PLAY_CARD:\n      return GAME_PHASES.PLAYING;\n    case NEW_TRICK:\n      return GAME_PHASES.TRICK_START;\n    default:\n      return state;\n  }\n};\n\nexport default heartsPhase;\n","import { ICardInfo, Suits } from \"../../common/heartRules\";\nimport { Hearts } from \"../../common/types/hearts\";\nimport { store } from \"../storeData\";\nimport * as fromHeartsRounds from \"./heartsRounds\";\nimport * as fromHeartsTricks from \"./heartsTricks\";\nimport * as fromHeartsPlayers from \"./heartsPlayers\";\nimport * as fromHeartsUI from \"./heartsUI\";\nimport { GAME_PHASES } from \"./heartPhases\";\n\nexport const initialState: Hearts.State = {\n  players: [],\n  phase: store.phase,\n  rounds: [{ tricks: [[]] }],\n  ui: { POV: null },\n};\n\nexport const getPassDirection = (state: Hearts.State) => {\n  const roundNumber = getRoundNumber(state);\n  const passDirections = [0, 1, -1, 2];\n  return passDirections[roundNumber % passDirections.length];\n};\n\nexport const isReadyToPass = (state: Hearts.State) => {\n  if (!isCurrentPhase(state, GAME_PHASES.PASSING)) {\n    return false;\n  }\n\n  const playerIDs = getPlayerIDs(state);\n\n  for (let p = 0; p < playerIDs.length; p++) {\n    let selectedCards = getSelectedCards(state, playerIDs[p]);\n    if (selectedCards?.length !== 3) {\n      return false;\n    }\n  }\n  return true;\n};\n\nexport const getToast = (state: Hearts.State) => {\n  switch (getCurrentPhase(state)) {\n    case GAME_PHASES.GAME_START:\n      return \"Welcome to Hearts\";\n    case GAME_PHASES.PASSING:\n      const players = getPlayers(state);\n      const passDirection = getPassDirection(state);\n      const POVIndex = getPOVPlayerIndex(state);\n      return \"Pass 3 cards to \" + players[(POVIndex + passDirection) % players.length].name;\n    case GAME_PHASES.PLAYING:\n      const currentPlayer = getCurrentPlayer(state);\n      return \"Waiting for \" + currentPlayer?.name;\n    case GAME_PHASES.GAME_END:\n      return \"GAME OVER!\";\n    default:\n      return \" \";\n  }\n};\n\n// Player selectors\nexport const getPlayers = (state: Hearts.State) => state.players;\nexport const getCurrentPhase = (state: Hearts.State) => state.phase;\nexport const getPlayerByName = (state: Hearts.State, playerName: string) =>\n  state?.players?.find((player) => player.name === playerName);\nexport const getPlayerHand = (state: Hearts.State, playerID: string) => {\n  const player = fromHeartsPlayers.getPlayerByID(state.players, playerID);\n  return player?.playerHand;\n};\nexport const getSelectedCards = (state: Hearts.State, playerID: string) =>\n  fromHeartsPlayers.getSelectedCards(state.players, playerID);\nexport const getPlayerIDs = (state: Hearts.State) => fromHeartsPlayers.getPlayerIDs(state.players);\n\nexport const getCurrentPlayer = (state: Hearts.State) => {\n  let players = getPlayers(state);\n  if (!players.length) {\n    // No players yet\n    return null;\n  }\n\n  const currentTrick = getCurrentTrick(state);\n  // If an empty trick, get the previous trick's winner.\n  if (!currentTrick.length) {\n    const previousTrick = getPreviousTrick(state);\n    if (!previousTrick.length) {\n      // Start of game, start with first player\n      return players[0];\n    }\n    // Retain lead of previous trick winner\n    const previousWinnerID = fromHeartsTricks.getTrickWinnerID(previousTrick);\n    return players.find((player) => player.id === previousWinnerID);\n  }\n  // If an ongoing trick, get the next player.\n  const lastMove = fromHeartsTricks.getLastMove(currentTrick);\n  const idx = players.findIndex((p) => p.id === lastMove.playerID);\n  return players[(idx + 1) % players.length];\n};\n\nexport const getCurrentPlayerID = (state: Hearts.State) => {\n  const currentPlayer = getCurrentPlayer(state);\n  if (currentPlayer === null) {\n    return null;\n  }\n  return currentPlayer?.id;\n};\n\nexport const isTrickComplete = (state: Hearts.State) => {\n  const players = getPlayers(state);\n  const currentTrick = getCurrentTrick(state);\n  if (players.length === currentTrick.length) {\n    return true;\n  }\n  return false;\n};\n\nexport const getPOVPlayerIndex = (state: Hearts.State) => {\n  const playerIDs = getPlayerIDs(state);\n  const POVPlayerID = getCurrentPOV(state);\n  return playerIDs.indexOf(POVPlayerID as string);\n};\n\nexport const isRoundComplete = (state: Hearts.State) => {\n  for (let playerID of getPlayerIDs(state)) {\n    const playerHand = getPlayerHand(state, playerID);\n    if (playerHand && playerHand.length > 0) {\n      return false;\n    }\n  }\n  return true;\n};\n\nexport const getScoreTotals = (state: Hearts.State) => {\n  const currentScores = getScores(state);\n  let sum = [...currentScores[0]].fill(0);\n  for (let roundScore of currentScores) {\n    for (let s = 0; s < roundScore.length; s++) {\n      sum[s] += roundScore[s];\n    }\n  }\n  return sum;\n};\n\nexport const isGameComplete = (state: Hearts.State) => {\n  // First check if round is complete..\n  if (!isRoundComplete(state)) {\n    return false;\n  }\n  // Check cumulate score for each player.  Return true when scores reach above 100\n  const scoreTotals = getScoreTotals(state);\n  for (let s = 0; s < scoreTotals.length; s++) {\n    if (scoreTotals[s] > 100) {\n      return true;\n    }\n  }\n  return false;\n};\n\n// Phase selectors\nexport const isCurrentPhase = (state: Hearts.State, phase: string) => state.phase === phase;\nexport const playerHandContainsCard = (state: Hearts.State, playerID: string, card: ICardInfo) =>\n  fromHeartsPlayers.playerHandContainsCard(state.players, playerID, card);\nexport const isPlayerHandOnlyHearts = (state: Hearts.State, playerID: string) =>\n  fromHeartsPlayers.isPlayerHandOnlyHearts(state.players, playerID);\nexport const playerHandContainsSuit = (state: Hearts.State, playerID: string, suit: Suits) =>\n  fromHeartsPlayers.playerHandContainsSuit(state.players, playerID, suit);\n\n// Round selectors\nexport const getRoundNumber = (state: Hearts.State) => fromHeartsRounds.getRoundNumber(state.rounds);\nexport const getCurrentTrick = (state: Hearts.State) => fromHeartsRounds.getCurrentTrick(state.rounds);\nexport const getPreviousTrick = (state: Hearts.State) => fromHeartsRounds.getPreviousTrick(state.rounds);\nexport const getCurrentTrickSuit = (state: Hearts.State) => fromHeartsRounds.getCurrentTrickSuit(state.rounds);\nexport const isHeartsBroken = (state: Hearts.State) => fromHeartsRounds.isHeartsBroken(state.rounds);\nexport const getCurrentWinnerID = (state: Hearts.State) => fromHeartsRounds.getCurrentWinnerID(state.rounds);\nexport const getScores = (state: Hearts.State) => fromHeartsRounds.getScores(state.rounds, getPlayerIDs(state));\n\n// UI selectors\nexport const getCurrentPOV = (state: Hearts.State) => fromHeartsUI.getCurrentPOV(state.ui);\n\nexport const getWinnerID = (state: Hearts.State) => (isTrickComplete(state) ? getCurrentWinnerID(state) : null);\n","import { isMobile } from \"react-device-detect\";\n\nexport const showPlayerHand = (playerDirection: string): boolean => {\n  return !isMobile || playerDirection === \"south\";\n};\n\nexport const defaultNavBarHeight = (height: number | undefined): number => {\n  return isMobile ? 40 : height ?? 64;\n};\n\nexport const getNavBarClassName = () => {\n  return isMobile ? \" p-0 pl-3\" : \" p-2 pl-3\";\n};\n\nexport const getScoreHeight = () => {\n  return isMobile ? 200 : 350;\n};\n","import React from 'react';\nimport { ICardInfo, ICardSymbolProps, ICardValueProps } from '../common/heartRules';\nimport { constants as heartsConstants } from '../common/heartRules';\n\ninterface ICardProps {\n  card: ICardInfo;\n  direction?: string;\n  overturned?: boolean;\n  toggled?: boolean;\n  onClickHandler?: () => void;\n}\n\nconst CardValue = ({ value }: ICardValueProps) => <div className=\"card__value\">{value}</div>;\n\nconst CardSymbol = ({ symbol }: ICardSymbolProps) => <div className=\"card__symbol\">{symbol}</div>;\n\nconst Card = ({ card, onClickHandler, direction, overturned = false, toggled = false }: ICardProps) => {\n  const { value, suit } = card;\n  const className =\n    'card card-width' +\n    (direction !== undefined ? ' card--' + direction : '') +\n    (toggled ? ' card--toggled' : '') +\n    (overturned ? ' card--overturned' : '');\n\n  const contents = overturned\n    ? []\n    : [\n        <CardValue key=\"value\" value={value} />,\n        <CardSymbol key=\"symbol\" symbol={heartsConstants.cardSuits[suit].symbol} />\n      ];\n\n  return (\n    <div className={className} onClick={onClickHandler} style={{ color: heartsConstants.cardSuits[suit].colour }}>\n      {contents}\n    </div>\n  );\n};\n\nexport default Card;\n","import { ICardInfo, Suits } from '../common/heartRules';\nimport { Hearts } from '../common/types/hearts';\nimport {\n  getCurrentTrickSuit,\n  getPlayerHand,\n  getSelectedCards,\n  isHeartsBroken,\n  playerHandContainsSuit\n} from '../redux/reducers';\n\nconst getRandomElement = (array: Array<ICardInfo>) => {\n  const max = array.length;\n  const ri = Math.floor(Math.random() * max);\n  return array[ri];\n};\n\nexport const aiPassChoice = (state: Hearts.State, playerID: string) => {\n  const hand = getPlayerHand(state, playerID);\n  const selectedCards = getSelectedCards(state, playerID);\n\n  const cardPool =\n    hand?.filter((card) => selectedCards?.findIndex((sc) => sc.suit === card.suit && sc.value === card.value) === -1) ??\n    [];\n\n  return getRandomElement(cardPool);\n};\n\nexport const AIplayRandomCard = (state: Hearts.State, playerID: string) => {\n  const hand = getPlayerHand(state, playerID);\n  const suit = getCurrentTrickSuit(state);\n  const hasLead = suit === null;\n  const followSuit = playerHandContainsSuit(state, playerID, suit as Suits);\n  const brokenHearts = isHeartsBroken(state);\n\n  let cardPool: ICardInfo[] | undefined = [];\n\n  if (followSuit) {\n    cardPool = hand?.filter((card) => card.suit === suit);\n  } else if (hasLead && !brokenHearts) {\n    cardPool = hand?.filter((card) => card.suit !== 'H');\n    if (cardPool?.length === 0) {\n      // Only hearts left in hand\n      cardPool = hand;\n    }\n  } else {\n    cardPool = hand;\n  }\n\n  return getRandomElement(cardPool as ICardInfo[]);\n};\n","import { Dispatch } from 'redux';\nimport { aiPassChoice } from '../../ai/random';\nimport { ICardInfo, Suits } from '../../common/heartRules';\nimport { Hearts } from '../../common/types/hearts';\nimport { getPlayers } from '../reducers';\nimport { dealCard, toggleCard } from './players';\n\nconst randomPop = (array: Array<ICardInfo>) => {\n  const index = Math.floor(Math.random() * array.length);\n  return array.splice(index, 1)[0];\n};\n\nexport const deal = () => {\n  return (dispatch: Dispatch, getState: () => Hearts.State) => {\n    const suits: Array<Suits> = ['C', 'D', 'S', 'H'];\n    const values = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];\n    const players = getPlayers(getState());\n    let deck = [];\n\n    for (let s = 0; s < suits.length; s++) {\n      for (let v = 0; v < values.length; v++) {\n        const cardInfo: ICardInfo = { value: values[v], suit: suits[s] };\n        deck.push(cardInfo);\n      }\n    }\n\n    const deckSize = deck.length;\n    for (let d = 0; d < deckSize; d++) {\n      dispatch(dealCard(players[d % players.length].id, randomPop(deck)));\n    }\n\n    // return Promise.resolve('Finished Dealing');\n  };\n};\n\nconst computerSelectPassCard = (playerID: string) => {\n  return (dispatch: Dispatch, getState: () => Hearts.State) => {\n    const state = getState();\n    let card = aiPassChoice(state, playerID);\n    dispatch(toggleCard(playerID, card));\n  };\n};\n\nexport const computerSelections = () => {\n  return (dispatch: any, getState: () => Hearts.State) => {\n    const state = getState();\n    const players = getPlayers(state);\n    const aiPlayers = players.filter((p) => p.playerType === 'AI');\n    for (let p = 0; p < aiPlayers.length; p++) {\n      for (let i = 0; i < 3; i++) {\n        dispatch(computerSelectPassCard(aiPlayers[p].id));\n      }\n    }\n    // return Promise.resolve('Done Selections');\n  };\n};\n","import { GAME_PHASES, SET_PHASE } from '../reducers/heartPhases';\n\nexport const startPassing = () => ({\n  type: SET_PHASE,\n  phase: GAME_PHASES.PASSING\n});\nexport const startPlaying = () => ({\n  type: SET_PHASE,\n  phase: GAME_PHASES.PLAYING\n});\nexport const startRound = () => ({\n  type: SET_PHASE,\n  phase: GAME_PHASES.ROUND_START\n});\nexport const endRound = () => ({\n  type: SET_PHASE,\n  phase: GAME_PHASES.ROUND_END\n});\nexport const endTrick = () => ({\n  type: SET_PHASE,\n  phase: GAME_PHASES.TRICK_END\n});\nexport const endGame = () => ({ type: SET_PHASE, phase: GAME_PHASES.GAME_END });\n\nexport type PhasesActionTypes =\n  | ReturnType<typeof startPassing>\n  | ReturnType<typeof startPlaying>\n  | ReturnType<typeof startRound>\n  | ReturnType<typeof endRound>\n  | ReturnType<typeof endTrick>\n  | ReturnType<typeof endGame>;\n","import { Dispatch } from 'redux';\nimport { ICardInfo } from '../../common/heartRules';\nimport { Hearts } from '../../common/types/hearts';\nimport {\n  getCurrentPhase,\n  getCurrentPlayer,\n  getCurrentPlayerID,\n  getCurrentTrickSuit,\n  getPassDirection,\n  getPlayerByName,\n  getPlayerIDs,\n  getPlayers,\n  getSelectedCards,\n  isCurrentPhase,\n  isGameComplete,\n  isHeartsBroken,\n  isPlayerHandOnlyHearts,\n  isReadyToPass,\n  isRoundComplete,\n  isTrickComplete,\n  playerHandContainsCard,\n  playerHandContainsSuit\n} from '../reducers';\nimport { GAME_PHASES } from '../reducers/heartPhases';\nimport { HEART_PLAYER_NAMES, PLAYER_TYPE } from '../reducers/heartsPlayers';\nimport { IPlayerInfo } from '../reducers/IPlayerInfo';\nimport { computerSelections, deal } from './deal';\nimport { endGame, endRound, endTrick, startPassing, startPlaying, startRound } from './phases';\nimport { addPlayer, passCards, playCard, toggleCard } from './players';\nimport { setPOV } from './ui';\nimport { AIplayRandomCard as aiPlayChoice } from '../../ai/random';\nimport { newTrick } from './tricks';\nimport { newGame, newRound } from './round';\n\nexport const addPlayerToState = (playerName: string, playerType: string = 'Human', POV = false) => (\n  dispatch: Dispatch,\n  getState: () => Hearts.State\n) => {\n  dispatch(addPlayer(playerName, playerType));\n  if (POV) {\n    const state = getState();\n    const player = getPlayerByName(state, playerName);\n    // TODO add reducer for POV\n    player?.id && dispatch(setPOV(player?.id));\n  }\n};\n\nconst passCardsAction = () => {\n  return (dispatch: any, getState: () => Hearts.State) => {\n    const state = getState();\n    const pass = getPassDirection(state);\n\n    const playerIDs = getPlayerIDs(state);\n    for (let i = 0; i < playerIDs.length; i++) {\n      const selectedCards = getSelectedCards(state, playerIDs[i]);\n      dispatch(\n        passCards(\n          playerIDs[i],\n          playerIDs[(i + playerIDs.length + pass) % playerIDs.length],\n          selectedCards as ICardInfo[]\n        )\n      );\n    }\n  };\n};\n\nconst computerMove = (currentPlayer: IPlayerInfo) => {\n  return (dispatch: any, getState: () => Hearts.State) => {\n    const state = getState();\n    const nextCard = aiPlayChoice(state, currentPlayer.id);\n    dispatch(playCard(currentPlayer.id, nextCard));\n    dispatch(gameTick());\n  };\n};\n\nconst MOVE_DELAY = 500; // ms\nexport const delayedPromise = (delay: number, action: () => void) => {\n  setTimeout(() => action(), delay);\n};\n\nexport const gameTick = () => {\n  return (dispatch: any, getState: () => Hearts.State) => {\n    switch (getCurrentPhase(getState())) {\n      case GAME_PHASES.GAME_START:\n        const playerIDs = getPlayers(getState());\n        // Add all players\n        if (playerIDs.length === 0) {\n          dispatch(addPlayerToState(HEART_PLAYER_NAMES.Player1, PLAYER_TYPE.AI));\n          dispatch(addPlayerToState(HEART_PLAYER_NAMES.Player2, PLAYER_TYPE.AI));\n          dispatch(addPlayerToState(HEART_PLAYER_NAMES.Player3, PLAYER_TYPE.AI, dispatch));\n          dispatch(addPlayerToState(HEART_PLAYER_NAMES.Player4, PLAYER_TYPE.Human, true));\n        }\n        dispatch(startRound());\n        break;\n      case GAME_PHASES.ROUND_START:\n        if (getPassDirection(getState()) === 0) {\n          // Skip if hand is for holding.\n          dispatch(deal());\n          dispatch(startPlaying());\n        } else {\n          dispatch(deal());\n          dispatch(computerSelections());\n          dispatch(startPassing());\n        }\n        break;\n      case GAME_PHASES.PASSING:\n        if (isReadyToPass(getState())) {\n          dispatch(passCardsAction());\n          dispatch(startPlaying());\n        }\n        break;\n      case GAME_PHASES.PLAYING:\n        if (isTrickComplete(getState())) {\n          dispatch(endTrick());\n        } else {\n          const currentPlayer = getCurrentPlayer(getState());\n          if (currentPlayer?.playerType === PLAYER_TYPE.AI) {\n            delayedPromise(MOVE_DELAY, () => dispatch(computerMove(currentPlayer)));\n          }\n        }\n        break;\n      case GAME_PHASES.TRICK_END:\n        if (isRoundComplete(getState())) {\n          delayedPromise(MOVE_DELAY, () => dispatch(endRound()));\n        } else {\n          delayedPromise(MOVE_DELAY, () => dispatch(newTrick()));\n        }\n        break;\n\n      case GAME_PHASES.TRICK_START:\n        dispatch(startPlaying());\n        break;\n\n      case GAME_PHASES.ROUND_NEW:\n        dispatch(startRound());\n        break;\n\n      case GAME_PHASES.ROUND_END:\n        if (isGameComplete(getState())) {\n          dispatch(endGame());\n        } else {\n          dispatch(newRound());\n          break;\n        }\n    }\n  };\n};\n\nexport const onNewGame = () => {\n  return (dispatch: any, getState: () => Hearts.State) => {\n    dispatch(newGame());\n    dispatch(gameTick());\n  };\n};\n\nconst isValidMove = (state: Hearts.State, playerID: string, card: ICardInfo) => {\n  if (isTrickComplete(state)) {\n    return false;\n  }\n\n  // Does Player possess card\n  if (!playerHandContainsCard(state, playerID, card)) {\n    return false;\n  }\n\n  // Suit to follow\n  const suit = getCurrentTrickSuit(state);\n\n  if (suit === null) {\n    // Player has the lead\n    // Check if hearts broken\n    if (card.suit === 'H' && !isHeartsBroken(state)) {\n      // Need to check if only hearts left in hand\n      if (isPlayerHandOnlyHearts(state, playerID)) {\n        return true;\n      }\n      return false;\n    }\n    return true;\n  }\n\n  if (card.suit === suit || !playerHandContainsSuit(state, playerID, suit)) {\n    // Following suit or Can't follow suit\n    return true;\n  }\n  return false;\n};\n\nexport const playCardAction = (playerID: string, card: ICardInfo) => {\n  return (dispatch: any, getState: () => Hearts.State) => {\n    const state = getState();\n    if (getCurrentPlayerID(state) === playerID && isValidMove(state, playerID, card)) {\n      // Play card, and tick over the game state\n      dispatch(playCard(playerID, card));\n    } else {\n      // Invalid card or playing out of turn.\n      // return Promise.reject('Invalid Card Played.');\n    }\n  };\n};\nexport const playOrToggleCard = (playerID: string, card: ICardInfo) => {\n  return (dispatch: any, getState: () => Hearts.State) => {\n    const state = getState();\n    let action = null;\n    if (isCurrentPhase(state, GAME_PHASES.PASSING)) {\n      action = toggleCard;\n    } else if (isCurrentPhase(state, GAME_PHASES.PLAYING)) {\n      action = playCardAction;\n    }\n    action && dispatch(action(playerID, card));\n  };\n};\n","import React, { useCallback } from 'react';\nimport Card from './Card';\nimport { ICardInfo } from '../common/heartRules';\nimport { IPlayerInfo } from '../redux/reducers/IPlayerInfo';\nimport { getCurrentPhase, getCurrentPlayer, getPlayerHand, getSelectedCards } from '../redux/reducers';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Hearts } from '../common/types/hearts';\nimport { gameTick, playOrToggleCard } from '../redux/actions';\nimport { PLAYER_TYPE } from '../redux/reducers/heartsPlayers';\nimport { GAME_PHASES } from '../redux/reducers/heartPhases';\n\nconst isToggled = (selectedCards: any, card: any) => {\n  return selectedCards.findIndex((c: any) => c.suit === card.suit && c.value === card.value) > -1;\n};\n\ninterface IPlayerHandProps {\n  playerInfo: IPlayerInfo;\n  cardsHidden: boolean;\n}\n\nconst PlayerHand = ({ playerInfo, cardsHidden }: IPlayerHandProps) => {\n  const cards = useSelector((state: Hearts.State) => getPlayerHand(state, playerInfo.id)) as Array<ICardInfo>;\n  const selectedCards = useSelector((state: Hearts.State) => getSelectedCards(state, playerInfo.id));\n  const dispatch = useDispatch();\n  const currentPlayer = useSelector(getCurrentPlayer);\n  const currentPhase = useSelector(getCurrentPhase);\n  const onCardClick = useCallback(\n    (card: ICardInfo) => {\n      if (!cardsHidden) {\n        if (\n          currentPhase === GAME_PHASES.PASSING ||\n          (currentPhase === GAME_PHASES.PLAYING && currentPlayer?.playerType === PLAYER_TYPE.Human)\n        ) {\n          dispatch(playOrToggleCard(playerInfo.id, card));\n          dispatch(gameTick());\n        }\n      }\n    },\n    [dispatch, cardsHidden, playerInfo.id, currentPlayer, currentPhase]\n  );\n\n  const cardElements = cards.map((card) => (\n    <Card\n      key={card.value + card.suit}\n      onClickHandler={() => onCardClick(card)}\n      card={card as ICardInfo}\n      toggled={isToggled(selectedCards, card)}\n      overturned={cardsHidden}\n    />\n  ));\n  return <div className=\"hand m-3\">{cardElements}</div>;\n};\n\nexport default PlayerHand;\n","import { PropsWithChildren } from 'react';\n\ninterface RenderIfProps {\n  validate: boolean;\n}\n\nconst RenderIf = ({ validate, children }: PropsWithChildren<RenderIfProps>) => (validate ? <>{children}</> : <></>);\n\nexport { RenderIf };\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { getToast } from \"../redux/reducers\";\n\nexport const Toast = () => {\n  const message = useSelector(getToast);\n\n  return <div className=\"blink_me\"> {message} </div>;\n};\n","import React, { useEffect, useState } from \"react\";\nimport { Badge } from \"react-bootstrap\";\nimport { useSelector } from \"react-redux\";\nimport { showPlayerHand } from \"../common/mobileRules\";\nimport { getPlayers, getScores } from \"../redux/reducers\";\nimport { PLAYER_TYPE } from \"../redux/reducers/heartsPlayers\";\nimport { IPlayerInfo } from \"../redux/reducers/IPlayerInfo\";\nimport PlayerHand from \"./PlayerHand\";\nimport { RenderIf } from \"./RenderIf\";\nimport { Toast } from \"./Toast\";\ninterface IPlayerProp {\n  playerDirection: string;\n  playerInfo: IPlayerInfo;\n  cardsHidden: boolean;\n}\nconst Player = ({ playerDirection, playerInfo, cardsHidden }: IPlayerProp) => {\n  const scores = useSelector(getScores);\n  const players = useSelector(getPlayers);\n  const [playerScore, setPlayerScore] = useState(0);\n\n  useEffect(() => {\n    const currentScore = scores[scores.length - 1];\n    const playerIndex = players.findIndex((player) => player.id === playerInfo.id);\n    setPlayerScore(currentScore[playerIndex]);\n  }, [scores, players, playerInfo]);\n\n  return (\n    <div className={\"player player--\" + playerDirection}>\n      <div className=\"text-light text-center player__name m-1\">\n        <RenderIf validate={playerInfo.playerType === PLAYER_TYPE.Human}>\n          <Toast />\n        </RenderIf>\n        <Badge variant=\"danger\" className={\"player-badge player-badge-\" + playerDirection}>\n          {playerInfo.name}\n          <Badge pill variant=\"light\" className=\"float-right\">\n            {playerScore}\n          </Badge>\n        </Badge>\n      </div>\n      {showPlayerHand(playerDirection) && <PlayerHand playerInfo={playerInfo} cardsHidden={cardsHidden} />}\n    </div>\n  );\n};\n\nexport default Player;\n","import React from \"react\";\n\ninterface ISlideProps {\n  direction: string;\n  cardinal: string;\n  children: React.ReactNode;\n}\n\nexport const Slide = ({ direction, cardinal, children }: ISlideProps) => {\n  let cName = \"slide\";\n  if (direction && cardinal) {\n    cName += \"-\" + direction + \"-\" + cardinal;\n  }\n  return <div className={cName}>{children}</div>;\n};\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { getCurrentTrick, getPlayerIDs, getPOVPlayerIndex, getWinnerID } from '../redux/reducers';\nimport Card from './Card';\nimport { Slide } from './Slide';\n\nexport const Trick = () => {\n  const trick = useSelector(getCurrentTrick);\n  const playerIDs = useSelector(getPlayerIDs) || [];\n  const winnerID = useSelector(getWinnerID);\n  const POVIndex = useSelector(getPOVPlayerIndex);\n  const directions = ['south', 'west', 'north', 'east'];\n  const pnum = playerIDs.length;\n  const directionMap: any = {};\n  for (let i = 0; i < playerIDs.length; i++) {\n    directionMap[playerIDs[(POVIndex + i) % pnum]] = directions[i];\n  }\n  const animationDirection = winnerID !== null ? directionMap[winnerID] : '';\n  const cards = trick.map((move: any) => (\n    <Card key={move.card.value + move.card.suit} direction={directionMap[move.playerID]} card={move.card} />\n  ));\n  return (\n    <Slide direction={'out'} cardinal={animationDirection}>\n      <div className=\"trick\">{cards}</div>\n    </Slide>\n  );\n};\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { getPlayers } from \"../redux/reducers\";\nimport Player from \"./Player\";\nimport { Trick } from \"./Trick\";\n\ninterface IHeartsGameProps {\n  navBarHeight?: number;\n}\n\nexport const HeartsGame = ({ navBarHeight }: IHeartsGameProps) => {\n  const players = useSelector(getPlayers);\n  const getHeight = () => {\n    return `calc(100% - ${navBarHeight}px)`;\n  };\n\n  if (!players || players.length === 0) {\n    return null;\n  }\n  return (\n    <div className=\"content d-flex flex-column w-100\" style={{ minHeight: getHeight(), height: getHeight() }}>\n      <Player playerDirection=\"north\" playerInfo={players[1]} cardsHidden />\n      <div className=\"flex-grow-1 row-flex\">\n        <Player playerDirection=\"west\" playerInfo={players[0]} cardsHidden />\n        <div className=\"game-board\">\n          <div className=\"viewport\" />\n          <Trick />\n        </div>\n        <Player playerDirection=\"east\" playerInfo={players[2]} cardsHidden />\n      </div>\n      <div>\n        <Player playerDirection=\"south\" playerInfo={players[3]} cardsHidden={false} />\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { Modal } from \"react-bootstrap\";\n\nconst Rules = () => {\n  const [show, setShow] = useState(false);\n  const handleClose = () => setShow(false);\n\n  return (\n    <>\n      <a href=\"#rules\" onClick={() => setShow(true)} className=\"text-light nav-link\">\n        Rules\n      </a>\n      <Modal show={show} onHide={handleClose} backdrop=\"static\" keyboard={false}>\n        <Modal.Header className=\"bg-dark p-2\" closeButton>\n          <Modal.Title className=\"text-light w-100 text-center\">Rules</Modal.Title>\n        </Modal.Header>\n        <Modal.Body className=\"background-color text-light\">\n          <h5>\n            <u>How To Play</u>\n          </h5>\n          1) Player with the 2 of Clubs always makes the first lead starting with that card\n          <br />\n          2) Players to the left must follow suit and try to out rank the cards in play\n          <br />\n          3) If they cannot follow suit, then any card may be played. Lead suit trumps others\n          <br />\n          4) If a player does not have any Clubs to match the 2 on the first round, they cannot play any Hearts or the\n          Queen of Spades\n          <br />\n          5) The winner of the round goes first in the next round\n          <br /> <br />\n          <h5>\n            <u>Scoring</u>\n          </h5>\n          1) After all cards are played, players check their winning rounds and count the Hearts and the Queen of Spades\n          <br />\n          2) Hearts are worth 1 point each and the Queen of Spades is worth 13 points <br />\n          3) Players want to avoid wining rounds with Hearts and the Queen of Spades <br />\n          4) If a player wins all of the Hearts and the Queen of Spades in the game, the player receives no points and\n          all other players receive 26 points\n          <br />\n        </Modal.Body>\n        <Modal.Footer className=\"background-color bt-0 p-0\"></Modal.Footer>\n      </Modal>\n    </>\n  );\n};\n\nexport default Rules;\n","import { GridReadyEvent } from \"ag-grid-community\";\nimport { AgGridColumn, AgGridReact } from \"ag-grid-react\";\nimport React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport \"ag-grid-community/dist/styles/ag-grid.css\";\nimport \"ag-grid-community/dist/styles/ag-theme-balham-dark.css\";\nimport { getScores } from \"../redux/reducers\";\nimport { getScoreHeight } from \"../common/mobileRules\";\n\ninterface IScore {\n  round: number | string;\n  player1: number;\n  player2: number;\n  player3: number;\n  you: number;\n}\n\nexport const ScoresTable = () => {\n  const [rowData, setRowData] = useState<Array<IScore>>([]);\n\n  const scores = useSelector(getScores);\n  useEffect(() => {\n    const rowData = [];\n    let runningScore = [0, 0, 0, 0];\n    for (let i = 0; i < scores.length; i++) {\n      runningScore = [\n        runningScore[0] + scores[i][0],\n        runningScore[1] + scores[i][1],\n        runningScore[2] + scores[i][2],\n        runningScore[3] + scores[i][3],\n      ];\n      rowData.push({\n        round: i + 1,\n        player1: scores[i][0],\n        player2: scores[i][1],\n        player3: scores[i][2],\n        you: scores[i][3],\n      } as IScore);\n    }\n    if (rowData.length > 1) {\n      rowData.push({\n        round: \"Total\",\n        player1: runningScore[0],\n        player2: runningScore[1],\n        player3: runningScore[2],\n        you: runningScore[3],\n      });\n    }\n    setRowData(rowData);\n  }, [scores]);\n\n  const columnDefs = [\n    {\n      field: \"round\",\n      width: 75,\n    },\n    {\n      field: \"you\",\n      width: 75,\n    },\n    {\n      field: \"player1\",\n      width: 75,\n    },\n    {\n      field: \"player2\",\n      width: 75,\n    },\n    {\n      field: \"player3\",\n      width: 75,\n    },\n  ];\n\n  const onGridReady = (event: GridReadyEvent) => {\n    event?.api.sizeColumnsToFit();\n  };\n\n  const rowClassRules = {\n    \"sick-days-warning\": function (params: any) {\n      return params?.data?.round === \"Total\";\n    },\n  };\n  return (\n    <div className=\"ag-theme-balham-dark grid_border\" style={{ height: getScoreHeight(), width: \"100%\" }}>\n      <AgGridReact rowData={rowData} columnDefs={columnDefs} onGridReady={onGridReady} rowClassRules={rowClassRules}>\n        <AgGridColumn field=\"rounds\"></AgGridColumn>\n        <AgGridColumn field=\"you\"></AgGridColumn>\n        <AgGridColumn field=\"player2\"></AgGridColumn>\n        <AgGridColumn field=\"player3\"></AgGridColumn>\n        <AgGridColumn field=\"player4\"></AgGridColumn>\n      </AgGridReact>\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport { ScoresTable } from \"./ScoresTable\";\n\nconst Scores = () => {\n  const [show, setShow] = useState(false);\n  const handleClose = () => setShow(false);\n\n  return (\n    <>\n      <a href=\"#scores\" onClick={() => setShow(true)} className=\"text-light nav-link\">\n        Scores\n      </a>\n      <Modal show={show} onHide={handleClose} backdrop=\"static\" keyboard={false}>\n        <Modal.Header className=\"bg-dark p-2\" closeButton>\n          <Modal.Title className=\"text-light w-100 text-center\">Scores</Modal.Title>\n        </Modal.Header>\n        <Modal.Body className=\"background-color text-light p-0\">\n          <ScoresTable />\n        </Modal.Body>\n        <Modal.Footer className=\"background-color bt-0 p-0\"></Modal.Footer>\n      </Modal>\n    </>\n  );\n};\n\nexport default Scores;\n","import React from \"react\";\nimport { Form, Navbar } from \"react-bootstrap\";\nimport { useDispatch } from \"react-redux\";\nimport { getNavBarClassName } from \"../common/mobileRules\";\nimport { onNewGame } from \"../redux/actions\";\nimport Rules from \"./Rules\";\nimport Scores from \"./Scores\";\n\nfunction NavBar() {\n  const dispatch = useDispatch();\n  return (\n    <>\n      <Navbar bg=\"dark\" variant=\"dark\" className={getNavBarClassName()}>\n        <Navbar.Brand href=\"#home\" className=\"mr-2\">\n          <img src=\"./heart.ico\" width=\"30\" height=\"30\" alt=\"\"></img>\n        </Navbar.Brand>\n        <Form inline className=\"mr-auto\">\n          <a href=\"#newGame\" onClick={() => dispatch(onNewGame())} className=\"text-light nav-link\">\n            New Game\n          </a>\n        </Form>\n        <Form inline>\n          <Scores />\n          <Rules />\n        </Form>\n      </Navbar>\n    </>\n  );\n}\n\nexport default NavBar;\n","import React from \"react\";\nimport { Toast } from \"./Toast\";\nimport { ScoresTable } from \"./ScoresTable\";\n\nexport const GameOver = () => {\n  return (\n    <div className={\"p-3\"}>\n      <div className=\"text-center text-light\">\n        <Toast />\n      </div>\n\n      <div className=\"d-flex justify-content-center m-2\">\n        <ScoresTable />\n      </div>\n    </div>\n  );\n};\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { HeartsGame } from \"./components/HeartsGames\";\nimport NavBar from \"./components/NavBar\";\nimport \"./styles/index.scss\";\nimport { RenderIf } from \"./components/RenderIf\";\nimport { getCurrentPhase } from \"./redux/reducers\";\nimport { GAME_PHASES } from \"./redux/reducers/heartPhases\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { gameTick } from \"./redux/actions\";\nimport { defaultNavBarHeight } from \"./common/mobileRules\";\nimport { GameOver } from \"./components/GameOver\";\n\nfunction App() {\n  const navBarRef = useRef<HTMLDivElement>(null);\n  const [navBarHeight, setNavBarHeight] = useState(defaultNavBarHeight(undefined));\n  const isGameOver = useSelector(getCurrentPhase);\n\n  const dispatch = useDispatch();\n  const phase = useSelector(getCurrentPhase);\n  useEffect(() => {\n    dispatch(gameTick());\n  }, [phase, dispatch]);\n\n  useEffect(() => {\n    setNavBarHeight(defaultNavBarHeight(navBarRef?.current?.clientHeight));\n  }, [navBarRef]);\n\n  return (\n    <>\n      <div ref={navBarRef}>\n        <NavBar />\n      </div>\n      <RenderIf validate={isGameOver === GAME_PHASES.GAME_END}>\n        <GameOver />\n      </RenderIf>\n      <RenderIf validate={isGameOver !== GAME_PHASES.GAME_END}>\n        <HeartsGame navBarHeight={navBarHeight} />\n      </RenderIf>\n    </>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport configureStore from './redux/store';\nimport { isMobile } from 'react-device-detect';\n\nfunction setClassName() {\n  const element = document.getElementById('root_html');\n  if (isMobile && element && element.className) {\n    element.className = 'mobile';\n  }\n}\nsetClassName();\n\nconst store = configureStore();\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import { applyMiddleware, combineReducers, createStore } from 'redux';\nimport thunkMiddleware from 'redux-thunk';\nimport logger from 'redux-logger';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport { initialState } from './reducers';\nimport heartsPhase from './reducers/heartPhases';\nimport heartsPlayers from './reducers/heartsPlayers';\nimport { heartsRounds } from './reducers/heartsRounds';\nimport heartsUI from './reducers/heartsUI';\n\nexport default function configureStore(preloadedState = initialState) {\n  const middleWares = [logger, thunkMiddleware];\n  const middlewareEnhancer = applyMiddleware(...middleWares);\n  const enhancers = [middlewareEnhancer];\n  const composedEnhancers = composeWithDevTools(...enhancers);\n  const rootReducer = combineReducers({\n    players: heartsPlayers,\n    phase: heartsPhase,\n    rounds: heartsRounds,\n    ui: heartsUI\n  });\n\n  const store = createStore(rootReducer, {}, composedEnhancers);\n  return store;\n}\n"],"sourceRoot":""}